# Exam #1: "Car Rental"
## Student: s269705 Bruno Andrea 

## React client application routes

- Route `/`:  
Main route, contains the list of vehicles that can be filtered by category or brand (both for unauthenticated and authenticated users)
- Route `/login`:  
Login page, inserting a valid username and password, a user can authenticate (both for unauthenticated and authenticated users)
- Route `/rentals`:  
Page that lists past and future rentals of the user, and allows the removal of future ones (only for authenticated users)
- Route `/newrental`:  
Page in which a user can book a new rental, inserting all the required fields, and giving credit card information (only for authenticated users)

## REST API server

- GET `/api/vehicles` (no need for cookie)  
  - No input
  - Gives a list of vehicle objects: {id, category, brand, model}

- POST `/api/login` (no need for cookie)
  - Receives authentication info {username, password}
  - Sets the cookie

- GET `/api/user`
  - Checks cookie to verify if the user is authenticated
  - No response (status 401 means unauthorized)

- POST `/api/logout`
  - Checks cookie
  - No response (clears cookie)

- GET `/api/rentals`
  - Checks cookie
  - Gives a list of rentals of the user {id, userId, vehicleId, startDay,
        endDay,  carCategory,  age,  driversNumber,
        estimatedKm, insurance,  price}

- DELETE `/api/rentals/:id`
  - Receives the id of the rental to delete
  - No response (only status)

- GET `/api/rentals/past`
  - Checks cookie
  - Gives the number of past rentals {num}

- POST `/api/stubpayment`
  - Receives credit card information {fullName , cardNumber , cvv}
  - No response (only status)

- GET `/api/vehicles/occupied`
  - Receives category, start date and end date of the rental as query parameters (?category= &startDay= &endDay=)
  - Gives the percentage of occupied vehicles and the number of free ones {prec, free}

- POST `/api/rentals`
  - Receives a new rental {category ,startDay ,endDay ,estimatedkm ,age ,drivers ,insurance ,price}
  - No response (only status)

## Server database

- Table `users`
  - id: Primary key autogenerated by the db
  - username: Unique name of the user
  - hash: Hash of the password of the user

- Table `vehicles`
  - id: Primary key autogenerated by the db
  - category: Category of the vehicle (A, B, C, D, E)
  - brand: Brand of the vehicle
  - model: Model of the vehicle

- Table `rentals`
  - id: Primary key autogenerated by the db
  - userId: Identifier of the user that booked the rental (primary key of `users`)
  - userId: Identifier of the vehicle assigned to the rental (primary key of `vehicles`)
  - startDay: First day of the rental
  - endDay: Last day of the rental
  - carCategory: Category of the vehicle (A, B, C, D, E)
  - age: Age of the principal driver of the rented car
  - driversNumber: Number of additional drivers for the rented car
  - estimatedKm: Estimated number of kilometers per day of rental
  - insurance: 1 for extra insurance, 0 for no extra insurance
  - price: Integer number that expresses the number of cents paid for the rental (to avoid storing and dealing with floating numbers for money)


## Main React Components
<!---
- `ListOfSomething` (in `List.js`): component purpose and main functionality
- `GreatButton` (in `GreatButton.js`): component purpose and main functionality
- ...

(only _main_ components, minor ones may be skipped)
-->

## Screenshot
<!---
![Configurator Screenshot](./img/screenshot.jpg)
-->

## Test users
<!---
* username, password
* username, password
* username, password (frequent customer)
* username, password
* username, password (frequent customer)
-->
